<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>第 6 章家庭作业 | Ayanami&#39;s blog</title>
<meta name="description" content="Life feeds on negative entropy" />
<link rel="shortcut icon" href="https://SylvanasQAQ.github.io/favicon.ico">
<link rel="stylesheet" href="https://SylvanasQAQ.github.io/styles/main.css">

<script src="https://SylvanasQAQ.github.io/media/js/jquery.min.js"></script>
<script src="https://SylvanasQAQ.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://SylvanasQAQ.github.io/media/js/aos.js"></script>
<script src="https://SylvanasQAQ.github.io/media/js/pace.min.js"></script>
<script src="https://SylvanasQAQ.github.io/media/js/view-image.min.js"></script>
<script src="https://SylvanasQAQ.github.io/media/js/jquery.magnific-popup.min.js"></script>
<script src="https://SylvanasQAQ.github.io/media/js/functions.js"></script>

    <meta name="referrer" content="never">
    <meta name="description" content="6.22
假设每条磁道的位数 (bits per track, bpt) 与圆洞的半径成正比，即 bpt=α⋅(x⋅r)\text{bpt} = \alpha \cdot (x \cdot r)bpt=α⋅(x⋅r)；总的磁道数 (trac..." />
    <meta name="keywords" content="CSAPP" />
    <script src="https://SylvanasQAQ.github.io/media/js/waterfall.min.js"></script>
    <script src="https://SylvanasQAQ.github.io/media/js/prism.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <!-- <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script> -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.1/styles/agate.min.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.5.1/languages/verilog.min.js"></script>  
    <script>hljs.highlightAll();</script>
    
    
    
    <style type="text/css">
        #footer a#md-toc {
            position: fixed;
            right: 20px;
            bottom: 80px;
            text-align: center;
            z-index: 99;
            border: 0;
            width: 40px;
            height: 40px;
            text-align: center;
            line-height: 40px;
            padding: 0;
        }

        #footer a#md-toc img {
            vertical-align: middle;
        }

        #footer a#md-toc i.fa {
            margin: 0;
        }

        #sidebar11 {
            position: fixed;
            height: 40%;
            width: 300px;
            right: -400px;
            top: 30%;
            z-index: 2147483647;
	    
        }

        /* When screen is wider than 800px */
        @media screen and (min-width: 800px) {
            .main{
                width: 85%;
            }
        }
    </style>
    <!--  -->
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://SylvanasQAQ.github.io"><img src="/media/images/logoo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                <li class=""><a href="https://SylvanasQAQ.github.io" class="menu">首页</a></li>
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/tags" class="menu">
                      标签
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/about" class="menu">
                      关于
                    </a>
                  </li>
                
                <li class="search-menu-item hide-on-mobile hide-on-tablet"><a href="#search-lightbox" class="lightbox mfp-inline"><i class="fa fa-search-line"></i></a></li>
              </ul>
            </nav>
            <a href="#search-lightbox" class="lightbox epcl-search-button mfp-inline hide-on-tablet hide-on-desktop"><i class="fa fa-search-line"></i></a>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>
      <div class="hide-on-mobile hide-on-tablet hide-on-desktop">
        <div id="search-lightbox" class="grid-container grid-small grid-parent mfp-hide">
          <div class="search-wrapper section">
            <form id="gridea-search-form" data-update="1653661119992" action="/search/index.html" class="search-form" _lpchecked="1">
              <input type="text" name="q" id="s" value="" class="search-field" placeholder="搜点啥..." aria-label="搜点啥..." required="">
              <button type="submit" class="submit" aria-label="Submit">
                <i class="fa fa-search-line"></i>
              </button>
            </form>
          </div>
        </div>
      </div>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('https://SylvanasQAQ.github.io/post-images/0_rHJUypa.jpg');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="04-29-2022"><i class="fa fa-calendar"></i><span class="lately">1 个月前</span></time>
              
              <a href="https://SylvanasQAQ.github.io/post/0_rHJUypa/#comments" class="comments meta-info" title="">
                <i class="fa fa-comment remixicon"></i><span class="comment-count valine-comment-count" data-xid="/post/0_rHJUypa/"> </span>
              </a>
              <span id="/post/0_rHJUypa/" class="leancloud_visitors views-counter meta-info" title=""><i class="fa fa-leancloud remixicon"></i><span class="leancloud-visitors-count"></span></span>
              
            </div>
            <div class="info">
              <div class="tags ">
                
                      <a href="https://SylvanasQAQ.github.io/tag/6PZSNKfJ9/" class="ctag ctag-0 ctag-6PZSNKfJ9" aria-label="">CSAPP</a>
                    
              </div>
              <h1 class="title ularge white bold">第 6 章家庭作业</h1>
            </div>
          </div>
        </div>  

        <div id="sidebar11" class="bg-white hosted v" style="padding-left: 10px; padding-right: 10px; overflow-y:scroll;">
            <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#622">6.22</a></li>
<li><a href="#623">6.23</a></li>
<li><a href="#624">6.24</a></li>
<li><a href="#625">6.25</a></li>
<li><a href="#626">6.26</a></li>
<li><a href="#627">6.27</a></li>
<li><a href="#628">6.28</a></li>
<li><a href="#629">6.29</a></li>
<li><a href="#630">6.30</a></li>
<li><a href="#631">6.31</a></li>
<li><a href="#632">6.32</a></li>
<li><a href="#633">6.33</a></li>
<li><a href="#634">6.34</a></li>
<li><a href="#635">6.35</a></li>
<li><a href="#636">6.36</a></li>
<li><a href="#637">6.37</a></li>
<li><a href="#638">6.38</a></li>
<li><a href="#639">6.39</a></li>
<li><a href="#640">6.40</a></li>
<li><a href="#641">6.41</a></li>
<li><a href="#642">6.42</a></li>
<li><a href="#643">6.43</a></li>
<li><a href="#644">6.44</a></li>
<li><a href="#645">6.45</a></li>
<li><a href="#646">6.46</a></li>
</ul>
</li>
</ul>

            </div>
        </div>

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <h2 id="622">6.22</h2>
<p>假设每条磁道的位数 (bits per track, bpt) 与圆洞的半径成正比，即 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bpt</mtext><mo>=</mo><mi>α</mi><mo>⋅</mo><mo>(</mo><mi>x</mi><mo>⋅</mo><mi>r</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\text{bpt} = \alpha \cdot (x \cdot r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord text"><span class="mord">bpt</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span>；总的磁道数 (track number, tn) 与盘面可用半径成正比，即 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>tn</mtext><mo>=</mo><mi>β</mi><mo>⋅</mo><mo>(</mo><mn>1</mn><mo>−</mo><mi>x</mi><mo>)</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">\text{tn} = \beta \cdot (1-x)r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord text"><span class="mord">tn</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，则磁盘的容量 (capacity, c) 可以表示为</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mo>=</mo><mtext>bpt</mtext><mo>⋅</mo><mtext>tn</mtext><mo>=</mo><mi>α</mi><mi>β</mi><mo>⋅</mo><msup><mi>r</mi><mn>2</mn></msup><mo>(</mo><mn>1</mn><mo>−</mo><mi>x</mi><mo>)</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">c = \text{bpt} \cdot \text{tn} = \alpha \beta \cdot r^2 (1-x) x
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord text"><span class="mord">bpt</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord text"><span class="mord">tn</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mord mathdefault">x</span></span></span></span></span></p>
<p>其中 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> 均为常数，因此 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mo>∝</mo><mi>x</mi><mo>−</mo><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">c \propto x - x^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∝</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>。当 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">x = \frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 时，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">c</span></span></span></span> 取得最大值 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mn>1</mn><mn>4</mn></mfrac><msup><mi>r</mi><mn>2</mn></msup><mo>⋅</mo><mi>α</mi><mo>⋅</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">\frac{1}{4} r^2 \cdot \alpha \cdot \beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span>。</p>
<h2 id="623">6.23</h2>
<p>该磁盘的平均旋转延迟为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>avg rotation</mtext></msub><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>×</mo><mo>(</mo><mn>60</mn><mtext> s</mtext><mi mathvariant="normal">/</mi><mn>15000</mn><mtext> RPM</mtext><mo>)</mo><mo>×</mo><mn>1000</mn><mtext> ms/s</mtext><mo>≈</mo><mn>2</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{avg rotation}} = \frac{1}{2} \times (60 \text{ s}/15000 \text{ RPM}) \times 1000 \text{ ms/s} \approx 2 \text{ ms}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.317502em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">6</span><span class="mord">0</span><span class="mord text"><span class="mord"> s</span></span><span class="mord">/</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> RPM</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> ms/s</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span>。</p>
<p>扇区的平均传送时间为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>avg transfer</mtext></msub><mo>=</mo><mn>60</mn><mtext> s</mtext><mi mathvariant="normal">/</mi><mn>15000</mn><mtext> RPM</mtext><mo>×</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>800</mn><mtext> 扇区/磁道</mtext><mo>×</mo><mn>1000</mn><mtext> ms/s</mtext><mo>≈</mo><mn>0.005</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{avg transfer}} = 60 \text{ s}/15000 \text{ RPM} \times 1/800 \text{ 扇区/磁道} \times 1000 \text{ ms/s} \approx 0.005 \text{ ms}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg transfer</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">6</span><span class="mord">0</span><span class="mord text"><span class="mord"> s</span></span><span class="mord">/</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> RPM</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord">8</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">扇区</span><span class="mord">/</span><span class="mord cjk_fallback">磁道</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> ms/s</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">0</span><span class="mord">5</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span>。</p>
<p>因此访问扇区的平均时间为</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>access</mtext></msub><mo>=</mo><msub><mi>T</mi><mtext>avg seek</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg rotation</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg transfer</mtext></msub><mo>=</mo><mn>6.005</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{access}} = T_{\text{avg seek}} + T_{\text{avg rotation}} + T_{\text{avg transfer}} = 6.005 \text{ ms}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">access</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg seek</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.317502em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg transfer</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">.</span><span class="mord">0</span><span class="mord">0</span><span class="mord">5</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span></span></p>
<h2 id="624">6.24</h2>
<p>A. 对第一个块定位读/写头的时间为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>avg seek</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg rotation</mtext></msub><mo>=</mo><mn>6</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{avg seek}} + T_{\text{avg rotation}} = 6 \text{ ms}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg seek</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.317502em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span> (参照 6.23)，当逻辑块被映射到连续的扇区上时为最优情况，此时的传送时间为 (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mtext> MB</mtext><mo>≈</mo><mn>1000</mn><mtext> KB</mtext></mrow><annotation encoding="application/x-tex">1 \text{ MB} \approx 1000 \text{ KB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord text"><span class="mord"> MB</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> KB</span></span></span></span></span>)：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>transfer</mtext></msub><mo>=</mo><mo>(</mo><mn>2</mn><mtext> MB</mtext><mi mathvariant="normal">/</mi><mn>512</mn><mtext> B</mtext><mo>)</mo><mo>×</mo><mn>60</mn><mtext> s</mtext><mi mathvariant="normal">/</mi><mn>15000</mn><mtext> RPM</mtext><mo>×</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>1000</mn><mtext> 扇区/磁道</mtext><mo>×</mo><mn>1000</mn><mtext> ms/s</mtext><mo>=</mo><mn>16</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{transfer}} = (2 \text{ MB}/ 512 \text{ B}) \times 60 \text{ s}/15000 \text{ RPM} \times 1/1000 \text{ 扇区/磁道} \times 1000 \text{ ms/s} = 16 \text{ ms}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">transfer</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord text"><span class="mord"> MB</span></span><span class="mord">/</span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord text"><span class="mord"> B</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">6</span><span class="mord">0</span><span class="mord text"><span class="mord"> s</span></span><span class="mord">/</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> RPM</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">扇区</span><span class="mord">/</span><span class="mord cjk_fallback">磁道</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mord text"><span class="mord"> ms/s</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span></span></p>
<p>所以读该文件所需要的最优时间为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>access</mtext></msub><mo>=</mo><msub><mi>T</mi><mtext>avg seek</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg rotation</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>transfer</mtext></msub><mo>=</mo><mn>22</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{access}} = T_{\text{avg seek}} + T_{\text{avg rotation}} + T_{\text{transfer}} = 22 \text{ ms}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">access</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg seek</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.317502em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">transfer</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span>。</p>
<p>B. 如果块是随机映射到磁盘扇区上的，那么对每个逻辑块的读都需要重新定位读/写头，但总的数据传送时间不变，因此总时间为：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>T</mi><mtext>access</mtext></msub><mo>=</mo><mo>(</mo><mn>2</mn><mtext> MB</mtext><mi mathvariant="normal">/</mi><mn>512</mn><mtext> B</mtext><mo>)</mo><mo>×</mo><mo>(</mo><msub><mi>T</mi><mtext>avg seek</mtext></msub><mo>+</mo><msub><mi>T</mi><mtext>avg rotation</mtext></msub><mo>)</mo><mo>+</mo><msub><mi>T</mi><mtext>transfer</mtext></msub><mo>=</mo><mn>24022</mn><mtext> ms</mtext></mrow><annotation encoding="application/x-tex">T_{\text{access}} = (2 \text{ MB}/ 512 \text{ B}) \times (T_{\text{avg seek}} + T_{\text{avg rotation}}) + T_{\text{transfer}} = 24022 \text{ ms}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">access</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord text"><span class="mord"> MB</span></span><span class="mord">/</span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord text"><span class="mord"> B</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg seek</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.317502em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg rotation</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">transfer</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">4</span><span class="mord">0</span><span class="mord">2</span><span class="mord">2</span><span class="mord text"><span class="mord"> ms</span></span></span></span></span></span></p>
<h2 id="625">6.25</h2>
<table>
<thead>
<tr>
<th style="text-align:center">高速缓存</th>
<th style="text-align:center">m</th>
<th style="text-align:center">C</th>
<th style="text-align:center">B</th>
<th style="text-align:center">E</th>
<th style="text-align:center">S</th>
<th style="text-align:center">t</th>
<th style="text-align:center">s</th>
<th style="text-align:center">b</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">4</td>
<td style="text-align:center">4</td>
<td style="text-align:center">64</td>
<td style="text-align:center">24</td>
<td style="text-align:center">6</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">4</td>
<td style="text-align:center">256</td>
<td style="text-align:center">1</td>
<td style="text-align:center">30</td>
<td style="text-align:center">0</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">8</td>
<td style="text-align:center">1</td>
<td style="text-align:center">128</td>
<td style="text-align:center">22</td>
<td style="text-align:center">7</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">8</td>
<td style="text-align:center">128</td>
<td style="text-align:center">1</td>
<td style="text-align:center">29</td>
<td style="text-align:center">0</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1</td>
<td style="text-align:center">32</td>
<td style="text-align:center">22</td>
<td style="text-align:center">5</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">32</td>
<td style="text-align:center">4</td>
<td style="text-align:center">8</td>
<td style="text-align:center">24</td>
<td style="text-align:center">3</td>
<td style="text-align:center">5</td>
</tr>
</tbody>
</table>
<h2 id="626">6.26</h2>
<table>
<thead>
<tr>
<th style="text-align:center">高速缓存</th>
<th style="text-align:center">m</th>
<th style="text-align:center">C</th>
<th style="text-align:center">B</th>
<th style="text-align:center">E</th>
<th style="text-align:center">S</th>
<th style="text-align:center">t</th>
<th style="text-align:center">s</th>
<th style="text-align:center">b</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">32</td>
<td style="text-align:center"><u>2048</u></td>
<td style="text-align:center">8</td>
<td style="text-align:center">1</td>
<td style="text-align:center"><u>256</u></td>
<td style="text-align:center">21</td>
<td style="text-align:center">8</td>
<td style="text-align:center">3</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">32</td>
<td style="text-align:center">2048</td>
<td style="text-align:center"><u>4</u></td>
<td style="text-align:center"><u>4</u></td>
<td style="text-align:center">128</td>
<td style="text-align:center">23</td>
<td style="text-align:center">7</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center">2</td>
<td style="text-align:center">8</td>
<td style="text-align:center">64</td>
<td style="text-align:center"><u>25</u></td>
<td style="text-align:center"><u>6</u></td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">32</td>
<td style="text-align:center">1024</td>
<td style="text-align:center"><u>32</u></td>
<td style="text-align:center">2</td>
<td style="text-align:center">16</td>
<td style="text-align:center">23</td>
<td style="text-align:center">4</td>
<td style="text-align:center"><u>5</u></td>
</tr>
</tbody>
</table>
<h2 id="627">6.27</h2>
<p>A. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>组索引</mtext><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\text{组索引} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">组索引</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>有效标记位</mtext><mo>=</mo><mtext>45 or 38</mtext></mrow><annotation encoding="application/x-tex">\text{有效标记位} = \text{45 or 38}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">有效标记位</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord text"><span class="mord">45 or 38</span></span></span></span></span>，会在组 1 中命中的十六进制内存地址为 <code>0x08A4</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x08A7</code>，<code>0x0704</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x0707</code>。</p>
<p>B.  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>组索引</mtext><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">\text{组索引} = 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">组索引</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>有效标记位</mtext><mo>=</mo><mn>91</mn></mrow><annotation encoding="application/x-tex">\text{有效标记位} = 91</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">有效标记位</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">1</span></span></span></span>，会在组 6 中命中的十六进制内存地址为 <code>0x1238</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x123B</code>。</p>
<h2 id="628">6.28</h2>
<p>A. 第二组的有效位均为 0，因此没有地址会在组 2 命中。</p>
<p>B. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>组索引</mtext><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">\text{组索引} = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">组索引</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>有效标记位</mtext><mo>=</mo><mtext>C7 or 05</mtext></mrow><annotation encoding="application/x-tex">\text{有效标记位} = \text{C7 or 05}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">有效标记位</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord">C7 or 05</span></span></span></span></span>，会在组 4 中命中的十六进制内存地址为 <code>0x18F0</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x18F3</code>，<code>0x00B0</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x00B3</code>。</p>
<p>C. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>组索引</mtext><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">\text{组索引} = 5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">组索引</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>有效标记位</mtext><mo>=</mo><mn>71</mn></mrow><annotation encoding="application/x-tex">\text{有效标记位} = 71</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">有效标记位</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">1</span></span></span></span>，会在组 5 中命中的十六进制内存地址为 <code>0x0E34</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x0E37</code>。</p>
<p>D. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>组索引</mtext><mo>=</mo><mn>7</mn></mrow><annotation encoding="application/x-tex">\text{组索引} = 7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">组索引</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>有效标记位</mtext><mo>=</mo><mtext>DE</mtext></mrow><annotation encoding="application/x-tex">\text{有效标记位} = \text{DE}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord cjk_fallback">有效标记位</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord text"><span class="mord">DE</span></span></span></span></span>，会在组 7 中命中的十六进制内存地址为 <code>0x1BDC</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x1BDF</code>。</p>
<h2 id="629">6.29</h2>
<p>A.</p>
<table>
<thead>
<tr>
<th style="text-align:center">11</th>
<th style="text-align:center">10</th>
<th style="text-align:center">9</th>
<th style="text-align:center">8</th>
<th style="text-align:center">7</th>
<th style="text-align:center">6</th>
<th style="text-align:center">5</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">2</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CI</td>
<td style="text-align:center">CI</td>
<td style="text-align:center">CO</td>
<td style="text-align:center">CO</td>
</tr>
</tbody>
</table>
<p>B.</p>
<table>
<thead>
<tr>
<th style="text-align:center">操作</th>
<th style="text-align:center">地址</th>
<th style="text-align:center">命中？</th>
<th style="text-align:center">读出的值 (或者未知)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">读</td>
<td style="text-align:center">0x834</td>
<td style="text-align:center">否</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center">写</td>
<td style="text-align:center">0x836</td>
<td style="text-align:center">否</td>
<td style="text-align:center">未知</td>
</tr>
<tr>
<td style="text-align:center">读</td>
<td style="text-align:center">0xFFD</td>
<td style="text-align:center">是</td>
<td style="text-align:center">C0</td>
</tr>
</tbody>
</table>
<h2 id="630">6.30</h2>
<p>A. 高速缓存的大小 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo>=</mo><mi>S</mi><mo>×</mo><mi>E</mi><mo>×</mo><mi>B</mi><mo>=</mo><mn>128</mn></mrow><annotation encoding="application/x-tex">C = S \times E \times B = 128</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span></span></span></span> 字节。</p>
<p>B.</p>
<table>
<thead>
<tr>
<th style="text-align:center">12</th>
<th style="text-align:center">11</th>
<th style="text-align:center">10</th>
<th style="text-align:center">9</th>
<th style="text-align:center">8</th>
<th style="text-align:center">7</th>
<th style="text-align:center">6</th>
<th style="text-align:center">5</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">2</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CT</td>
<td style="text-align:center">CI</td>
<td style="text-align:center">CI</td>
<td style="text-align:center">CI</td>
<td style="text-align:center">CO</td>
<td style="text-align:center">CO</td>
</tr>
</tbody>
</table>
<h2 id="631">6.31</h2>
<p>A.</p>
<table>
<thead>
<tr>
<th style="text-align:center">12</th>
<th style="text-align:center">11</th>
<th style="text-align:center">10</th>
<th style="text-align:center">9</th>
<th style="text-align:center">8</th>
<th style="text-align:center">7</th>
<th style="text-align:center">6</th>
<th style="text-align:center">5</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">2</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>B.</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">高速缓存块偏移 (CO)</td>
<td style="text-align:center">0x02</td>
</tr>
<tr>
<td style="text-align:center">高速缓存组索引 (CI)</td>
<td style="text-align:center">0x06</td>
</tr>
<tr>
<td style="text-align:center">高速缓存标记 (CT)</td>
<td style="text-align:center">0x38</td>
</tr>
<tr>
<td style="text-align:center">高速缓存命中？(是/否)</td>
<td style="text-align:center">是</td>
</tr>
<tr>
<td style="text-align:center">返回的高速缓存字节</td>
<td style="text-align:center">0xEB</td>
</tr>
</tbody>
</table>
<h2 id="632">6.32</h2>
<p>A.</p>
<table>
<thead>
<tr>
<th style="text-align:center">12</th>
<th style="text-align:center">11</th>
<th style="text-align:center">10</th>
<th style="text-align:center">9</th>
<th style="text-align:center">8</th>
<th style="text-align:center">7</th>
<th style="text-align:center">6</th>
<th style="text-align:center">5</th>
<th style="text-align:center">4</th>
<th style="text-align:center">3</th>
<th style="text-align:center">2</th>
<th style="text-align:center">1</th>
<th style="text-align:center">0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">1</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
</tbody>
</table>
<p>B.</p>
<table>
<thead>
<tr>
<th style="text-align:center">参数</th>
<th style="text-align:center">值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">高速缓存块偏移 (CO)</td>
<td style="text-align:center">0x00</td>
</tr>
<tr>
<td style="text-align:center">高速缓存组索引 (CI)</td>
<td style="text-align:center">0x02</td>
</tr>
<tr>
<td style="text-align:center">高速缓存标记 (CT)</td>
<td style="text-align:center">0xB7</td>
</tr>
<tr>
<td style="text-align:center">高速缓存命中？(是/否)</td>
<td style="text-align:center">否</td>
</tr>
<tr>
<td style="text-align:center">返回的高速缓存字节</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table>
<h2 id="633">6.33</h2>
<p>会在组 2 中命中的 8 个内存地址为 <code>0x1788</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x178B</code> 和 <code>0x16C8</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∼</mo></mrow><annotation encoding="application/x-tex">\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">∼</span></span></span></span><code>0x16CB</code>。</p>
<h2 id="634">6.34</h2>
<p>dest 数组的命中情况如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">列0</th>
<th style="text-align:center">列1</th>
<th style="text-align:center">列2</th>
<th style="text-align:center">列3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>行0</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
</tr>
<tr>
<td style="text-align:center"><strong>行1</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
</tr>
<tr>
<td style="text-align:center"><strong>行2</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
</tr>
<tr>
<td style="text-align:center"><strong>行3</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
</tr>
</tbody>
</table>
<p>src 数组的命中情况如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">列0</th>
<th style="text-align:center">列1</th>
<th style="text-align:center">列2</th>
<th style="text-align:center">列3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>行0</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">m</td>
</tr>
<tr>
<td style="text-align:center"><strong>行1</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行2</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">m</td>
</tr>
<tr>
<td style="text-align:center"><strong>行3</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
</tr>
</tbody>
</table>
<h2 id="635">6.35</h2>
<p>dest 数组的命中情况如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">列0</th>
<th style="text-align:center">列1</th>
<th style="text-align:center">列2</th>
<th style="text-align:center">列3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>行0</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行1</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行2</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行3</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
</tbody>
</table>
<p>src 数组的命中情况如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">列0</th>
<th style="text-align:center">列1</th>
<th style="text-align:center">列2</th>
<th style="text-align:center">列3</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>行0</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行1</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行2</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
<tr>
<td style="text-align:center"><strong>行3</strong></td>
<td style="text-align:center">m</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
<td style="text-align:center">h</td>
</tr>
</tbody>
</table>
<h2 id="636">6.36</h2>
<p>A.</p>
<p><code>x[0][i]</code> 和 <code>x[1][i]</code> 被映射到 cache 相同的组中，因此不命中率为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>%。</p>
<p>B.</p>
<p><code>x[0][i]</code> 和 <code>x[1][i]</code> 会被映射到不同的组中，不命中率为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span>%。</p>
<p>C.</p>
<p><code>x[0][i]</code> 和 <code>x[1][i]</code> 会被映射到同一个组但是不同行中，不命中率为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span>%。</p>
<p>D.</p>
<p>不会，因为更大的高速缓存大小也无法减少冷不命中的次数，所以不命中率不变。</p>
<p>E.</p>
<p>可以，因为更大的块大小减少了冷不命中的次数，不命中率下降。</p>
<h2 id="637">6.37</h2>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th style="text-align:center">N=64</th>
<th style="text-align:center">N=60</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>sumA</strong></td>
<td style="text-align:center">25%</td>
<td style="text-align:center">25%</td>
</tr>
<tr>
<td style="text-align:center"><strong>sumB</strong></td>
<td style="text-align:center">100%</td>
<td style="text-align:center">25%</td>
</tr>
<tr>
<td style="text-align:center"><strong>sumC</strong></td>
<td style="text-align:center">50%</td>
<td style="text-align:center">25%</td>
</tr>
</tbody>
</table>
<h2 id="638">6.38</h2>
<p>A. 写总数为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mo>×</mo><mn>16</mn><mo>×</mo><mn>16</mn><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">4 \times 16 \times 16 = 1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord">4</span></span></span></span>。</p>
<p>B. 在高速缓存中不命中的写总数是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mo>×</mo><mn>16</mn><mo>×</mo><mn>16</mn><mo>÷</mo><mn>8</mn><mo>=</mo><mn>128</mn></mrow><annotation encoding="application/x-tex">4 \times 16 \times 16 \div 8 = 128</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span></span></span></span>。</p>
<p>C. 不命中率是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>12.5</mn></mrow><annotation encoding="application/x-tex">12.5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span></span></span></span>%。</p>
<h2 id="639">6.39</h2>
<p>A. 写总数为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mo>×</mo><mn>16</mn><mo>×</mo><mn>16</mn><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">4 \times 16 \times 16 = 1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord">4</span></span></span></span>。</p>
<p>B. 在高速缓存中不命中的写总数是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mo>×</mo><mn>16</mn><mo>×</mo><mn>16</mn><mo>÷</mo><mn>4</mn><mo>=</mo><mn>256</mn></mrow><annotation encoding="application/x-tex">4 \times 16 \times 16 \div 4 = 256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span></span></span></span>。</p>
<p>C. 不命中率是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span>%。</p>
<h2 id="640">6.40</h2>
<p>A. 写总数为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn><mo>×</mo><mn>16</mn><mo>×</mo><mn>16</mn><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">4 \times 16 \times 16 = 1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">2</span><span class="mord">4</span></span></span></span>。</p>
<p>B. 在高速缓存中不命中的写总数是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>16</mn><mo>×</mo><mn>16</mn><mo>÷</mo><mn>2</mn><mo>+</mo><mn>16</mn><mo>×</mo><mn>16</mn><mo>÷</mo><mn>2</mn><mo>=</mo><mn>256</mn></mrow><annotation encoding="application/x-tex">16 \times 16 \div 2 + 16 \times 16 \div 2= 256</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span></span></span></span>。</p>
<p>C. 不命中率是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span>%。</p>
<h2 id="641">6.41</h2>
<p>高速缓存每行只能容纳一个 <code>pixel</code> 结构体，因此会有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span>% 的写在高速缓存中不命中。</p>
<h2 id="642">6.42</h2>
<p>高速缓存每次加载 4 个 char，有 1 个 char 因为冷不命中 miss，因此还是会有 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span>% 的写在高速缓存中不命中。</p>
<h2 id="643">6.43</h2>
<p>高速缓存每次加载 1 个 int，且由于冷不命中 miss，因此 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>% 的写在高速缓存中不命中。</p>
<h2 id="644">6.44</h2>
<p>从 <a href="http://csapp.cs.cmu.edu/3e/mountain.tar">CSAPP 官网</a>下载 mountain 压缩包，解压后 make 并运行，得到以下结果：</p>
<pre><code class="language-c">Clock frequency is approx. 2300.0 MHz
Memory mountain (MB/sec)                                                        
        s1      s2      s3      s4      s5      s6      s7      s8      s9      s10     s11     s12     s13     s14     s15    
128m    18742   9757    6592    4387    3415    2935    2559    2252    2176    2093    2111    2085    2037    2071    1908
64m     19037   10054   6670    4472    3486    2967    2634    2344    2281    2246    2284    2215    2141    2104    2087
32m     19291   10480   7094    4870    3623    3216    2840    2522    2490    2405    2414    2395    2378    2424    2387
16m     20314   12228   8378    6339    4620    4286    3196    2886    2857    2896    2943    3088    3133    3253    3261
8m      22539   15352   12114   10344   8913    7677    6621    5791    5534    5837    5808    6055    6867    7412    7123
4m      39694   28494   22420   17825   14470   12300   10733   9434    8657    8119    7782    7488    7330    7201    7065
2m      39689   28433   22435   17799   14494   12287   10735   9429    8654    8148    7770    7488    7308    7191    7104
1024k   39629   28475   22450   17911   14529   12354   10742   9458    8692    8304    8098    8080    8136    8445    8639
512k    40971   31511   29140   27366   24465   21376   18773   16542   17455   21877   20912   23175   22438   23637   23087
256k    42116   32825   32615   32444   31370   29765   27767   25635   24794   24669   24317   24509   24055   23636   23207
128k    42139   32839   32732   32153   31337   29942   27677   24890   25222   24791   23997   24484   24055   23767   23315
64k     41893   32825   32084   31881   30824   29484   28037   24533   24341   28545   42816   45508   44939   44489   43313
32k     49324   49067   48124   47104   45397   45181   44860   43615   43155   43303   43351   40773   40817   40773   39867
16k     48312   47104   45508   44022   44322   41860   42047   38610   38055   36935   35674   34125   35341   32817   33941
</code></pre>
<p>编写 Python 脚本对数据进行可视化：</p>
<pre><code class="language-py">import matplotlib.pyplot as plt
import numpy as np

data = []
for line in open(&quot;output.txt&quot;,&quot;r&quot;):
    line = line.replace(&quot;\t&quot;, &quot; &quot;)
    line = line.split(&quot; &quot;)
    if line[0].endswith(&quot;k&quot;) or line[0].endswith(&quot;m&quot;):
        if line[0] == &quot;Clock&quot;:
            continue
        data.append([int(i) for i in line[1:-1]])
data = np.array(data)
X_LEN = data.shape[1]
Y_LEN = data.shape[0]

fig = plt.figure(figsize=(8,8))
ax = plt.axes(projection='3d')
X = np.arange(1, X_LEN+1, 1)
Y = np.arange(1, Y_LEN+1, 1)
X, Y = np.meshgrid(X, Y)
ax.plot_surface(X, Y, data,cmap='plasma', edgecolor='none')

ax.set(xlim=(1,X_LEN), ylim=(1,Y_LEN), xlabel='Stride (x8 bytes)', ylabel='Size (byte)', zlabel='\nread throughput (MB/s)')
ax.set_xticks(np.arange(1, X_LEN+1, 2))
ax.set_xticklabels(['s1', 's3', 's5', 's7', 's9', 's11', 's13', 's15'])
ax.set_yticks(np.arange(1, Y_LEN+1, 2))
ax.set_yticklabels(['128m', '32m', '8m', '2m', '512k', '128k', '32k'])
ax.set_zticks([5000, 10000, 15000, 20000, 25000, 30000, 35000, 40000])
ax.text(X_LEN-2, 13, data[13-1][X_LEN-3], &quot;L1 cache (~64k)&quot;, color='red')
ax.text(X_LEN-2, 9, data[9-1][X_LEN-3], &quot;L2 cache (512k)&quot;, color='blue')
ax.text(X_LEN-2, 5, data[5-1][X_LEN-3], &quot;L3 cache (8M)&quot;, color='red')
plt.show()
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://s2.loli.net/2022/04/30/1a3TE94OJhoSUHQ.png" alt="存储器山" width="654" height="559" loading="lazy"></figure>
<p>在 Mac 终端输入 <code>system_profiler SPHardwareDataType | grep Cache</code> 和 <code>sysctl machdep.cpu.brand_string</code> 分别得到以下输出：</p>
<pre><code class="language-c">// Output of `system_profiler SPHardwareDataType | grep Cache`
L2 Cache (per Core): 512 KB
L3 Cache: 8 MB

// Output of `sysctl machdep.cpu.brand_string`
machdep.cpu.brand_string: Intel(R) Core(TM) i7-1068NG7 CPU @ 2.30GHz
</code></pre>
<p>在 <a href="https://www.eatyourbytes.com/cpu-detail/intel-i7-1068ng7/">EatYourBytes</a> 上查得 i7-1068NG7 的 L1 Cache 的大小为 80 KB。</p>
<figure data-type="image" tabindex="2"><img src="https://s2.loli.net/2022/04/30/TFSgM7e8LDaHA3Q.png" alt="i7-1068NG7 的 Cache 信息" width="846" height="166" loading="lazy"></figure>
<p>因为原始版本的步长不够短，所以从存储器山中只能得出 L1 Cache 约为 64 KB。为得到准确的 L1 Cache，对 <code>mountain.c</code> 文件进行修改：</p>
<pre><code class="language-c">/* $begin mountainmain */
    // from 224k to 16k
    for (size = 14*MINBYTES; size &gt;= MINBYTES; size -= MINBYTES) {
/* $end mountainmain */
</code></pre>
<p>重新编译运行，利用输出结果绘制出存储器山的图像，可以清楚地看到 L1 Cache 的山脊线在 80 KB：</p>
<figure data-type="image" tabindex="3"><img src="https://s2.loli.net/2022/04/30/ab7tzZegqvyM4wY.png" alt="存储器山的细节" width="641" height="607" loading="lazy"></figure>
<h2 id="645">6.45</h2>
<p>因为转置运算大部分为内存操作，运算操作较少，因此很难从算法角度去优化。下面尝试通过循环展开去尽量最大化利用高速缓存（以下提到的 <code>axb loop unrolling</code> 指对变量 <code>i</code> 进行 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">\times a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span><span class="mord mathdefault">a</span></span></span></span> 展开，对变量 <code>j</code> 进行 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">\times b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">×</span><span class="mord mathdefault">b</span></span></span></span> 展开）</p>
<pre><code class="language-c">#include &lt;assert.h&gt;
#include &lt;memory.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;

void transpose(int *dst, int *src, int dim)
{
    int i, j;

    for (i = 0; i &lt; dim; i++)
        for (j = 0; j &lt; dim; j++)
            dst[j * dim + i] = src[i * dim + j];
}

// use 4x8 loop unrolling
void transpose_4x8(int *dst, int *src, int dim)
{
    int i, j, k;
    int dim2 = dim * 2;
    int dim3 = dim * 3;
    int dim4 = dim * 4;
    int dim5 = dim * 5;
    int dim6 = dim * 6;
    int dim7 = dim * 7;

    for (i = 0; i &lt;= dim - 4; i += 4)
    {
        for (j = 0; j &lt;= dim - 8; j += 8)
        {
            int dst_offset = j * dim + i;
            int dst_offset2 = dst_offset + 1;
            int dst_offset3 = dst_offset + 2;
            int dst_offset4 = dst_offset + 3;
            int src_offset = i * dim + j;
            int src_offset2 = src_offset + dim;
            int src_offset3 = src_offset + dim2;
            int src_offset4 = src_offset + dim3;

            dst[dst_offset] = src[src_offset];
            dst[dst_offset2] = src[src_offset2];
            dst[dst_offset3] = src[src_offset3];
            dst[dst_offset4] = src[src_offset4];
            dst[dst_offset + dim] = src[src_offset + 1];
            dst[dst_offset2 + dim] = src[src_offset2 + 1];
            dst[dst_offset3 + dim] = src[src_offset3 + 1];
            dst[dst_offset4 + dim] = src[src_offset4 + 1];
            dst[dst_offset + dim2] = src[src_offset + 2];
            dst[dst_offset2 + dim2] = src[src_offset2 + 2];
            dst[dst_offset3 + dim2] = src[src_offset3 + 2];
            dst[dst_offset4 + dim2] = src[src_offset4 + 2];
            dst[dst_offset + dim3] = src[src_offset + 3];
            dst[dst_offset2 + dim3] = src[src_offset2 + 3];
            dst[dst_offset3 + dim3] = src[src_offset3 + 3];
            dst[dst_offset4 + dim3] = src[src_offset4 + 3];
            dst[dst_offset + dim4] = src[src_offset + 4];
            dst[dst_offset2 + dim4] = src[src_offset2 + 4];
            dst[dst_offset3 + dim4] = src[src_offset3 + 4];
            dst[dst_offset4 + dim4] = src[src_offset4 + 4];
            dst[dst_offset + dim5] = src[src_offset + 5];
            dst[dst_offset2 + dim5] = src[src_offset2 + 5];
            dst[dst_offset3 + dim5] = src[src_offset3 + 5];
            dst[dst_offset4 + dim5] = src[src_offset4 + 5];
            dst[dst_offset + dim6] = src[src_offset + 6];
            dst[dst_offset2 + dim6] = src[src_offset2 + 6];
            dst[dst_offset3 + dim6] = src[src_offset3 + 6];
            dst[dst_offset4 + dim6] = src[src_offset4 + 6];
            dst[dst_offset + dim7] = src[src_offset + 7];
            dst[dst_offset2 + dim7] = src[src_offset2 + 7];
            dst[dst_offset3 + dim7] = src[src_offset3 + 7];
            dst[dst_offset4 + dim7] = src[src_offset4 + 7];
        }

        for (k = j; k &lt; dim; k++)
        {
            int dst_offset = k * dim + i;
            int src_offset = i * dim + k;

            dst[dst_offset] = src[src_offset];
            dst[dst_offset + 1] = src[src_offset + dim];
            dst[dst_offset + 2] = src[src_offset + dim2];
            dst[dst_offset + 3] = src[src_offset + dim3];
        }
    }

    for (; i &lt; dim; i++)
        for (j = 0; j &lt; dim; j++)
            dst[j * dim + i] = src[i * dim + j];
}

// use 2x8 loop unrolling
void transpose_2x8(int *dst, int *src, int dim)
{
    int i, j, k;
    int dim2 = dim * 2;
    int dim3 = dim * 3;
    int dim4 = dim * 4;
    int dim5 = dim * 5;
    int dim6 = dim * 6;
    int dim7 = dim * 7;

    for (i = 0; i &lt;= dim - 2; i += 2)
    {
        for (j = 0; j &lt;= dim - 8; j += 8)
        {
            int dst_offset = j * dim + i;
            int dst_offset2 = dst_offset + 1;
            int src_offset = i * dim + j;
            int src_offset2 = src_offset + dim;

            dst[dst_offset] = src[src_offset];
            dst[dst_offset2] = src[src_offset2];
            dst[dst_offset + dim] = src[src_offset + 1];
            dst[dst_offset2 + dim] = src[src_offset2 + 1];
            dst[dst_offset + dim2] = src[src_offset + 2];
            dst[dst_offset2 + dim2] = src[src_offset2 + 2];
            dst[dst_offset + dim3] = src[src_offset + 3];
            dst[dst_offset2 + dim3] = src[src_offset2 + 3];
            dst[dst_offset + dim4] = src[src_offset + 4];
            dst[dst_offset2 + dim4] = src[src_offset2 + 4];
            dst[dst_offset + dim5] = src[src_offset + 5];
            dst[dst_offset2 + dim5] = src[src_offset2 + 5];
            dst[dst_offset + dim6] = src[src_offset + 6];
            dst[dst_offset2 + dim6] = src[src_offset2 + 6];
            dst[dst_offset + dim7] = src[src_offset + 7];
            dst[dst_offset2 + dim7] = src[src_offset2 + 7];
        }

        for (k = j; k &lt; dim; k++)
        {
            int dst_offset = k * dim + i;
            int src_offset = i * dim + k;

            dst[dst_offset] = src[src_offset];
            dst[dst_offset + 1] = src[src_offset + dim];
        }
    }

    for (; i &lt; dim; i++)
        for (j = 0; j &lt; dim; j++)
            dst[j * dim + i] = src[i * dim + j];
}

// use 1x4 loop unrolling
void transpose_1x4(int *dst, int *src, int dim)
{
    int i, j;
    int dim2 = dim * 2;
    int dim3 = dim * 3;

    for (i = 0; i &lt; dim; i++)
    {
        for (j = 0; j &lt;= dim - 4; j += 4)
        {
            int dst_offset = j * dim + i;
            int src_offset = i * dim + j;

            dst[dst_offset] = src[src_offset];
            dst[dst_offset + dim] = src[src_offset + 1];
            dst[dst_offset + dim2] = src[src_offset + 2];
            dst[dst_offset + dim3] = src[src_offset + 3];
        }

        for (; j &lt; dim; j++)
            dst[j * dim + i] = src[i * dim + j];
    }
}


#define N 2048
#define LOOP 50
int main()
{
    for (int num = 4, len, size; num &gt;= -4; num--)
    {
        len = N + num;
        size = len * len;
        int *space1 = (int *)malloc(size * sizeof(int));
        for (int i = 0; i &lt; size; i++)
            space1[i] = i;
        int *space2 = (int *)malloc(size * sizeof(int));
        int *space3 = (int *)malloc(size * sizeof(int));
        int *space4 = (int *)malloc(size * sizeof(int));
        int *space5 = (int *)malloc(size * sizeof(int));

        printf(&quot;N = %d\t&quot;, len);
        clock_t start, end;

        start = clock();
        for (int i = 0; i &lt; LOOP; i++)
            transpose_1x4(space3, space1, len);
        end = clock();
        printf(&quot;1x4: %ld | &quot;, end - start);

        start = clock();
        for (int i = 0; i &lt; LOOP; i++)
            transpose_2x8(space4, space1, len);
        end = clock();
        printf(&quot;2x8: %ld | &quot;, end - start);

        start = clock();
        for (int i = 0; i &lt; LOOP; i++)
            transpose_4x8(space5, space1, len);
        end = clock();
        printf(&quot;4x8: %ld | &quot;, end - start);

        start = clock();
        for (int i = 0; i &lt; LOOP; i++)
            transpose(space2, space1, len);
        end = clock();
        printf(&quot;base: %ld\n&quot;, end - start);

        assert(memcmp(space2, space3, len * sizeof(int)) == 0);
        assert(memcmp(space2, space4, len * sizeof(int)) == 0);
        assert(memcmp(space2, space5, len * sizeof(int)) == 0);
        free(space1);
        free(space2);
        free(space3);
        free(space4);
        free(space5);
    }
}
</code></pre>
<p>在 <code>Intel(R) Core(TM) i7-1068NG7 CPU @ 2.30GHz</code> 平台上测试得到以下输出：</p>
<pre><code class="language-c">N = 2052        1x4: 442347 | 2x8: 306081 | 4x8: 282073 | base: 559574
N = 2051        1x4: 399215 | 2x8: 293979 | 4x8: 268137 | base: 522580
N = 2050        1x4: 399677 | 2x8: 286348 | 4x8: 264988 | base: 496756
N = 2049        1x4: 560932 | 2x8: 316974 | 4x8: 273297 | base: 1231977
N = 2048        1x4: 953632 | 2x8: 644103 | 4x8: 376935 | base: 1517008
N = 2047        1x4: 536301 | 2x8: 292933 | 4x8: 289311 | base: 1211034
N = 2046        1x4: 409470 | 2x8: 291104 | 4x8: 259760 | base: 500450
N = 2045        1x4: 386963 | 2x8: 306163 | 4x8: 262260 | base: 498458
N = 2044        1x4: 403452 | 2x8: 299026 | 4x8: 257768 | base: 509572
</code></pre>
<p>可以观察到当 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi><mo>=</mo><mn>2047</mn><mo separator="true">,</mo><mn>2048</mn><mo separator="true">,</mo><mn>2049</mn></mrow><annotation encoding="application/x-tex">N = 2047, 2048, 2049</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">4</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">4</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">4</span><span class="mord">9</span></span></span></span> 时，原始版本的转置函数用时翻了一倍以上，这可能是高速缓存的冲突不命中导致的。还可发现，随着循环展开程度的提高，缓存利用率提升，因此耗时降低。而且循环展开程度越高，转置函数对不同大小矩阵的适应性就越好。</p>
<h2 id="646">6.46</h2>
<p>同 6.45，将有向图转换成其对应的无向图也大部分为内存操作，采用循环展开最大化利用高速缓存。下面的 <code>axbd</code> 指对变量 <code>i</code> 进行 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">\times a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span><span class="mord mathdefault">a</span></span></span></span> 展开，对变量 <code>j</code> 进行 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>×</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">\times b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">×</span><span class="mord mathdefault">b</span></span></span></span> 展开，<code>d</code> 表示同时更新 dst 和 src。</p>
<pre><code class="language-c">#include &lt;assert.h&gt;
#include &lt;memory.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;time.h&gt;

void col_convert(int *G, int dim)
{
    int i, j;

    for (i = 0; i &lt; dim; i++)
        for(j = 0; j &lt; dim; j++)
            G[j*dim + i] = G[i*dim + j] || G[j*dim + i];
}

void col_convert_1x4(int *G, int dim)
{
    int i, j;
    int dim2 = dim*2;
    int dim3 = dim*3;

    for (i = 0; i &lt; dim; i++)
    {
        for (j = 0; j &lt;= dim-4; j+=4)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[dst_offset] = G[dst_offset] || G[src_offset];
            G[dst_offset+dim] = G[dst_offset+dim] || G[src_offset+1];
            G[dst_offset+dim2] = G[dst_offset+dim2] || G[src_offset+2];
            G[dst_offset+dim3] = G[dst_offset+dim3] || G[src_offset+3];
        }

        for (; j &lt; dim; j++)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[dst_offset] = G[dst_offset] || G[src_offset];
        }
    }
}

void col_convert_1x4d(int *G, int dim)
{
    int i, j;
    int dim2 = dim*2;
    int dim3 = dim*3;

    for (i = 0; i &lt; dim; i++)
    {
        for (j = 0; j &lt;= i-4; j+=4)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[src_offset] = G[dst_offset] = G[dst_offset] || G[src_offset];
            G[src_offset+1] = G[dst_offset+dim] = G[dst_offset+dim] || G[src_offset+1];
            G[src_offset+2] = G[dst_offset+dim2] = G[dst_offset+dim2] || G[src_offset+2];
            G[src_offset+3] = G[dst_offset+dim3] = G[dst_offset+dim3] || G[src_offset+3];
        }

        for (; j &lt;= i; j++)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[src_offset] = G[dst_offset] = G[dst_offset] || G[src_offset];
        }
    }
}


void col_convert_2x4(int *G, int dim)
{
    int i, j;
    int dim2 = dim*2;
    int dim3 = dim*3;

    for (i = 0; i &lt;= dim-2; i+=2)
    {
        for (j = 0; j &lt;= dim-4; j+=4)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;
            int dst_offset2 = dst_offset + 1;
            int src_offset2 = src_offset + dim;

            G[dst_offset] = G[dst_offset] || G[src_offset];
            G[dst_offset+dim] = G[dst_offset+dim] || G[src_offset+1];
            G[dst_offset+dim2] = G[dst_offset+dim2] || G[src_offset+2];
            G[dst_offset+dim3] = G[dst_offset+dim3] || G[src_offset+3];

            G[dst_offset2] = G[dst_offset2] || G[src_offset2];
            G[dst_offset2+dim] = G[dst_offset2+dim] || G[src_offset2+1];
            G[dst_offset2+dim2] = G[dst_offset2+dim2] || G[src_offset2+2];
            G[dst_offset2+dim3] = G[dst_offset2+dim3] || G[src_offset2+3];
        }

        for (; j &lt; dim; j++)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[dst_offset] = G[dst_offset] || G[src_offset];
            G[dst_offset+1] = G[dst_offset+1] || G[src_offset+dim];
        }
    }

    for (; i &lt; dim; i++)
    {
        for (j = 0; j &lt; dim; j++)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[dst_offset] = G[dst_offset] || G[src_offset];
        }
    }
}


void col_convert_2x4d(int *G, int dim)
{
    int i, j;
    int dim2 = dim*2;
    int dim3 = dim*3;

    for (i = 0; i &lt;= dim-2; i+=2)
    {
        for (j = 0; j &lt;= i-4; j+=4)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;
            int dst_offset2 = dst_offset + 1;
            int src_offset2 = src_offset + dim;

            G[src_offset] = G[dst_offset] = G[dst_offset] || G[src_offset];
            G[src_offset+1] = G[dst_offset+dim] = G[dst_offset+dim] || G[src_offset+1];
            G[src_offset+2] = G[dst_offset+dim2] = G[dst_offset+dim2] || G[src_offset+2];
            G[src_offset+3] = G[dst_offset+dim3] = G[dst_offset+dim3] || G[src_offset+3];
            

            G[src_offset2] = G[dst_offset2] = G[dst_offset2] || G[src_offset2];
            G[src_offset2+1] = G[dst_offset2+dim] = G[dst_offset2+dim] || G[src_offset2+1];
            G[src_offset2+2] = G[dst_offset2+dim2] = G[dst_offset2+dim2] || G[src_offset2+2];
            G[src_offset2+3] = G[dst_offset2+dim3] = G[dst_offset2+dim3] || G[src_offset2+3];
        }

        for (; j &lt;= i; j++)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[src_offset] = G[dst_offset] = G[dst_offset] || G[src_offset];
            G[src_offset+dim] = G[dst_offset+1] = G[dst_offset+1] || G[src_offset+dim];
        }
    }

    for (; i &lt; dim; i++)
    {
        for (j = 0; j &lt;= i; j++)
        {
            int dst_offset = j*dim + i;
            int src_offset = i*dim + j;

            G[src_offset] = G[dst_offset] = G[dst_offset] || G[src_offset];
        }
    }
}


#define N 1024
#define LOOP 100
int main()
{
    for(int num = -4; num &lt;= 4; num++)
    {
        int len = N + num;
        int size = len*len;
        int *space1 = (int*)malloc(size*sizeof(int));
        for(int i = 0; i &lt; size; i++)
            space1[i] = rand() % 13 == 0 ? 1 : 0;
        int *space2 = (int*)malloc(size*sizeof(int));
        int *space3 = (int*)malloc(size*sizeof(int));
        int *space4 = (int*)malloc(size*sizeof(int));
        int *space5 = (int*)malloc(size*sizeof(int));
        memcpy(space2, space1, size*sizeof(int));
        memcpy(space3, space1, size*sizeof(int));
        memcpy(space4, space1, size*sizeof(int));
        memcpy(space5, space1, size*sizeof(int));

        clock_t start, end;
        printf(&quot;N=%d\t&quot;, len);

        start = clock();
        for(int i = 0; i &lt; LOOP; i++)
            col_convert(space1, len);
        end = clock();
        printf(&quot;base: %lu | &quot;, end - start);

        start = clock();
        for(int i = 0; i &lt; LOOP; i++)
            col_convert_1x4(space2, len);
        end = clock();
        printf(&quot;1x4: %lu | &quot;, end - start);

        start = clock();
        for(int i = 0; i &lt; LOOP; i++)
            col_convert_1x4d(space5, len);
        end = clock();
        printf(&quot;1x4d: %lu | &quot;, end - start);

        start = clock();
        for(int i = 0; i &lt; LOOP; i++)
            col_convert_2x4(space3, len);
        end = clock();
        printf(&quot;2x4: %lu | &quot;, end - start);

        start = clock();
        for(int i = 0; i &lt; LOOP; i++)
            col_convert_2x4d(space4, len);
        end = clock();
        printf(&quot;2x4d: %lu\n&quot;, end - start);

        assert(memcmp(space1, space2, size*sizeof(int)) == 0);
        assert(memcmp(space1, space3, size*sizeof(int)) == 0);
        assert(memcmp(space1, space4, size*sizeof(int)) == 0);
        assert(memcmp(space1, space5, size*sizeof(int)) == 0);
        free(space1);
        free(space2);
        free(space3);
        free(space4);
        free(space5);
    }
}
</code></pre>
<p>在 <code>Intel(R) Core(TM) i7-1068NG7 CPU @ 2.30GHz</code> 平台上测试得到以下输出：</p>
<pre><code class="language-c">N=1020  base: 535192 | 1x4: 462210 | 1x4d: 251206 | 2x4: 398742 | 2x4d: 217055
N=1021  base: 503793 | 1x4: 479376 | 1x4d: 246278 | 2x4: 389119 | 2x4d: 203354
N=1022  base: 501356 | 1x4: 476889 | 1x4d: 245754 | 2x4: 394216 | 2x4d: 211496
N=1023  base: 510265 | 1x4: 455410 | 1x4d: 257818 | 2x4: 400418 | 2x4d: 215831
N=1024  base: 610578 | 1x4: 598900 | 1x4d: 317304 | 2x4: 496781 | 2x4d: 259734
N=1025  base: 495296 | 1x4: 527643 | 1x4d: 237458 | 2x4: 401026 | 2x4d: 223258
N=1026  base: 529399 | 1x4: 470104 | 1x4d: 249816 | 2x4: 391803 | 2x4d: 215337
N=1027  base: 523340 | 1x4: 470865 | 1x4d: 247452 | 2x4: 387347 | 2x4d: 223089
N=1028  base: 509739 | 1x4: 451330 | 1x4d: 252784 | 2x4: 381440 | 2x4d: 202910
</code></pre>
<p>可以观察到随着循环展开程度的提高，耗时逐步降低，采用同时更新 dst 和 src 后更是将耗时降为之前的一半。</p>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

        

            <section class="related section">
              
              <article class="prev grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://SylvanasQAQ.github.io/post-images/PGELKesQU.jpg');"></div>
                 <a href="https://SylvanasQAQ.github.io/post/PGELKesQU/" class="full-link"></a>
                 <div class="info">
                  <time datetime="05-19-2022">05-19-2022</time>
                  <h4 class="title white no-margin">Verilog 语法</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://SylvanasQAQ.github.io/media/images/left-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              
              
              <article class="next grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://SylvanasQAQ.github.io/post-images/gUdBg3EiE.jpg');"></div>
                 <a href="https://SylvanasQAQ.github.io/post/gUdBg3EiE/" class="full-link"></a>
                 <div class="info">
                  <time datetime="04-24-2022">04-24-2022</time>
                  <h4 class="title white no-margin">第 5 章家庭作业</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://SylvanasQAQ.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>
              
            
              <div id="comments" class="bg-white hosted ">
                <div class="clear"></div>
<script>
jQuery(document).ready(function($){
    $('.vemoji-btn').text('😀');
    $("#comments").on('click', 'span.vat',function(){
        $(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
        $('textarea#veditor').focus();
    })
    if(window.location.hash){
        var checkExist = setInterval(function() {
            if ($(window.location.hash).length) {
                $('html, body').animate({scrollTop: $(window.location.hash).offset().top-200}, 600);
                clearInterval(checkExist);
            }
        }, 100);
    }
})
</script>

              </div>
            

            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://SylvanasQAQ.github.io/post/bt9ZR2x4y/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://SylvanasQAQ.github.io/post-images/bt9ZR2x4y.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="05-27-2022">05-27-2022</time>
                      <h4 class="title usmall">
                        <a href="https://SylvanasQAQ.github.io/post/bt9ZR2x4y/">Vitis HLS 实现手写数字识别</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://SylvanasQAQ.github.io/post/PGELKesQU/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://SylvanasQAQ.github.io/post-images/PGELKesQU.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="05-19-2022">05-19-2022</time>
                      <h4 class="title usmall">
                        <a href="https://SylvanasQAQ.github.io/post/PGELKesQU/">Verilog 语法</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://SylvanasQAQ.github.io/post/0_rHJUypa/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://SylvanasQAQ.github.io/post-images/0_rHJUypa.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="04-29-2022">04-29-2022</time>
                      <h4 class="title usmall">
                        <a href="https://SylvanasQAQ.github.io/post/0_rHJUypa/">第 6 章家庭作业</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://SylvanasQAQ.github.io/tag/8q-hvEy6h/" class="ctag ctag-0 ctag-8q-hvEy6h" aria-label="">FPGA</a>
                    
                      <a href="https://SylvanasQAQ.github.io/tag/6PZSNKfJ9/" class="ctag ctag-1 ctag-6PZSNKfJ9" aria-label="">CSAPP</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://SylvanasQAQ.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="https://SylvanasQAQ.github.io/post/about ">Ayanami&#39;s blog</a></h4>
                    <p class="founder">Life feeds on negative entropy</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/SylvanasQAQ" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://SylvanasQAQ.github.io"><img src="/media/images/gridea.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2022 共 6 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>

        <a href="javascript:void(0)" id="md-toc" class="epcl-button dark" style="display:none">
          <i class="fa"><svg t="1650112028452" class="icon" viewBox="0 -150 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2752" width="30" height="30"><path d="M124 256.992q0-26.016 18.496-44.512t44.512-18.496 44.512 18.496 18.496 44.512-18.496 44.512T187.008 320t-44.512-18.496-18.496-44.512z m732 29.024H357.984q-15.008 0-25.504-10.496t-10.496-25.504q0-15.008 10.496-25.504t25.504-10.496H856q15.008 0 25.504 10.496t10.496 25.504q0 15.008-10.496 25.504t-25.504 10.496zM124 512q0-26.016 18.496-44.512t44.512-18.496 44.512 18.496T250.016 512t-18.496 44.512-44.512 18.496-44.512-18.496T124 512z m732 28.992H357.984q-15.008 0-25.504-10.496t-10.496-25.504q0-15.008 10.496-25.504t25.504-10.496H856q15.008 0 25.504 10.496t10.496 25.504q0 15.008-10.496 25.504t-25.504 10.496zM124 767.008q0-26.016 18.496-44.512T187.008 704t44.512 18.496 18.496 44.512-18.496 44.512-44.512 18.496-44.512-18.496-18.496-44.512z m732 28.992H357.984q-15.008 0-25.504-10.496t-10.496-25.504q0-15.008 10.496-25.504t25.504-10.496H856q15.008 0 25.504 10.496t10.496 25.504q0 15.008-10.496 25.504t-25.504 10.496z" p-id="2753" fill="#e8e8e8"></path></svg></i>
        </a>
    </footer>
    
    <div class="clear"></div>

        
<!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script> -->
<script src="https://SylvanasQAQ.github.io/media/js/av-min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/valine/1.3.10/Valine.Pure.min.js"></script>
<script>
    new Valine({
        el: '#comments',
        appId: 'eRwxRootBaBzDBwoutG7bLYE-gzGzoHsz' ,
        appKey: '7NuCOYYcsdap67sNFgVsIHUm',
        pageSize: 30,
        placeholder: '既然来了，那就留个痕迹吧~',
        visitor: true // 阅读量统计
    })
</script>
    

      
    <script src="https://SylvanasQAQ.github.io/media/js/functions-post.js"></script>
     <script>
      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;
	  let halfHeight = document.body.clientHeight*0.8;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop+halfHeight) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop+halfHeight) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    


      (function ($) {
            "use strict";
                var bt;
                var isHiden = true;

                window.onmouseup = function(obj){
                    if(obj.toElement.className == "epcl-button dark" || obj.toElement.className instanceof SVGAnimatedString || obj.toElement.className == "bg-white hosted v" || obj.toElement.className == "toc-container")
                        return;
                    if (isHiden == false) {
                        $('#sidebar11').animate({ right: '-400px' }); //目录块向左移动
                        isHiden = !isHiden;
                    }
                };

                bt = $('#md-toc');
                $(window).scroll(function () {
                    var st;
                    st = $(window).scrollTop();
                    return bt.css('display', 'block');
                });
                return bt.on('click', function (event) {
                    if (isHiden) {
                        $('#sidebar11').animate({ right: '0' }).show();//目录块向右移动
                    } else {
                        $('#sidebar11').animate({ right: '-400px' }); //目录块向左移动
                    }
                    isHiden = !isHiden;
                    return false;
                });
        })(jQuery);
    </script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
